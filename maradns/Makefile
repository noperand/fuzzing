MARADNS_DIR=$(PWD)/maradns-2.0.13
DEADWOOD_DIR=$(MARADNS_DIR)/deadwood-3.2.09
DEADWOOD_INCLUDE=$(DEADWOOD_DIR)/src

DEADWOOD_UDP_REQUEST_FUZZ=deadwood_udp_request_fuzz

CC=afl-gcc -m32
CFLAGS=-Wall -I$(DEADWOOD_INCLUDE)

all : $(DEADWOOD_UDP_REQUEST_FUZZ)

$(DEADWOOD_UDP_REQUEST_FUZZ) : $(DEADWOOD_UDP_REQUEST_FUZZ).c
	$(CC) $(CFLAGS) -o $(DEADWOOD_UDP_REQUEST_FUZZ) $(DEADWOOD_INCLUDE)/DwUdpSocket.c $(DEADWOOD_INCLUDE)/DwSys.c $(DEADWOOD_INCLUDE)/DwStr.c $(DEADWOOD_INCLUDE)/DwSocket.c $(DEADWOOD_INCLUDE)/DwTcpSocket.c $(DEADWOOD_INCLUDE)/DwHash.c $(DEADWOOD_INCLUDE)/DwRadioGatun.c $(DEADWOOD_INCLUDE)/DwDict.c $(DEADWOOD_INCLUDE)/DwMararc.c $(DEADWOOD_INCLUDE)/DwRecurse.c $(DEADWOOD_INCLUDE)/DwCompress.c $(DEADWOOD_INCLUDE)/DwDnsStr.c $(DEADWOOD_UDP_REQUEST_FUZZ).c

clean :
	rm -f $(DEADWOOD_UDP_REQUEST_FUZZ) *~
